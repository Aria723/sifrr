{"version":3,"file":"sifrr.server.module.js","sources":["../src/server/delegate.js","../src/server/ext.js","../src/server/sendfile.js","../src/server/baseapp.js","../src/server/app.js","../src/server/sslapp.js","../src/sifrr.server.js"],"sourcesContent":["module.exports = (fxns, proto, delTo) => {\n  fxns.forEach(fxn => {\n    proto[fxn] = function () {\n      this[delTo][fxn](...arguments);\n      return this;\n    };\n  });\n};\n","const DEFAULT_EXT = 'application/octet-stream';\nconst extensions = {\n  '3gp' : 'video/3gpp',\n  a     : 'application/octet-stream',\n  ai    : 'application/postscript',\n  aif   : 'audio/x-aiff',\n  aiff  : 'audio/x-aiff',\n  asc   : 'application/pgp-signature',\n  asf   : 'video/x-ms-asf',\n  asm   : 'text/x-asm',\n  asx   : 'video/x-ms-asf',\n  atom  : 'application/atom+xml',\n  au    : 'audio/basic',\n  avi   : 'video/x-msvideo',\n  bat   : 'application/x-msdownload',\n  bin   : 'application/octet-stream',\n  bmp   : 'image/bmp',\n  bz2   : 'application/x-bzip2',\n  c     : 'text/x-c',\n  cab   : 'application/vnd.ms-cab-compressed',\n  cc    : 'text/x-c',\n  chm   : 'application/vnd.ms-htmlhelp',\n  class : 'application/octet-stream',\n  com   : 'application/x-msdownload',\n  conf  : 'text/plain',\n  cpp   : 'text/x-c',\n  crt   : 'application/x-x509-ca-cert',\n  css   : 'text/css',\n  csv   : 'text/csv',\n  cxx   : 'text/x-c',\n  deb   : 'application/x-debian-package',\n  der   : 'application/x-x509-ca-cert',\n  diff  : 'text/x-diff',\n  djv   : 'image/vnd.djvu',\n  djvu  : 'image/vnd.djvu',\n  dll   : 'application/x-msdownload',\n  dmg   : 'application/octet-stream',\n  doc   : 'application/msword',\n  dot   : 'application/msword',\n  dtd   : 'application/xml-dtd',\n  dvi   : 'application/x-dvi',\n  ear   : 'application/java-archive',\n  eml   : 'message/rfc822',\n  eps   : 'application/postscript',\n  exe   : 'application/x-msdownload',\n  f     : 'text/x-fortran',\n  f77   : 'text/x-fortran',\n  f90   : 'text/x-fortran',\n  flv   : 'video/x-flv',\n  for   : 'text/x-fortran',\n  gem   : 'application/octet-stream',\n  gemspec: 'text/x-script.ruby',\n  gif   : 'image/gif',\n  gz    : 'application/x-gzip',\n  h     : 'text/x-c',\n  hh    : 'text/x-c',\n  htm   : 'text/html',\n  html  : 'text/html',\n  ico   : 'image/vnd.microsoft.icon',\n  ics   : 'text/calendar',\n  ifb   : 'text/calendar',\n  iso   : 'application/octet-stream',\n  jar   : 'application/java-archive',\n  java  : 'text/x-java-source',\n  jnlp  : 'application/x-java-jnlp-file',\n  jpeg  : 'image/jpeg',\n  jpg   : 'image/jpeg',\n  js    : 'application/javascript',\n  json  : 'application/json',\n  log   : 'text/plain',\n  m3u   : 'audio/x-mpegurl',\n  m4v   : 'video/mp4',\n  man   : 'text/troff',\n  mathml: 'application/mathml+xml',\n  mbox  : 'application/mbox',\n  mdoc  : 'text/troff',\n  me    : 'text/troff',\n  mid   : 'audio/midi',\n  midi  : 'audio/midi',\n  mime  : 'message/rfc822',\n  mml   : 'application/mathml+xml',\n  mng   : 'video/x-mng',\n  mov   : 'video/quicktime',\n  mp3   : 'audio/mpeg',\n  mp4   : 'video/mp4',\n  mp4v  : 'video/mp4',\n  mpeg  : 'video/mpeg',\n  mpg   : 'video/mpeg',\n  ms    : 'text/troff',\n  msi   : 'application/x-msdownload',\n  odp   : 'application/vnd.oasis.opendocument.presentation',\n  ods   : 'application/vnd.oasis.opendocument.spreadsheet',\n  odt   : 'application/vnd.oasis.opendocument.text',\n  ogg   : 'application/ogg',\n  p     : 'text/x-pascal',\n  pas   : 'text/x-pascal',\n  pbm   : 'image/x-portable-bitmap',\n  pdf   : 'application/pdf',\n  pem   : 'application/x-x509-ca-cert',\n  pgm   : 'image/x-portable-graymap',\n  pgp   : 'application/pgp-encrypted',\n  pkg   : 'application/octet-stream',\n  pl    : 'text/x-script.perl',\n  pm    : 'text/x-script.perl-module',\n  png   : 'image/png',\n  pnm   : 'image/x-portable-anymap',\n  ppm   : 'image/x-portable-pixmap',\n  pps   : 'application/vnd.ms-powerpoint',\n  ppt   : 'application/vnd.ms-powerpoint',\n  ps    : 'application/postscript',\n  psd   : 'image/vnd.adobe.photoshop',\n  py    : 'text/x-script.python',\n  qt    : 'video/quicktime',\n  ra    : 'audio/x-pn-realaudio',\n  rake  : 'text/x-script.ruby',\n  ram   : 'audio/x-pn-realaudio',\n  rar   : 'application/x-rar-compressed',\n  rb    : 'text/x-script.ruby',\n  rdf   : 'application/rdf+xml',\n  roff  : 'text/troff',\n  rpm   : 'application/x-redhat-package-manager',\n  rss   : 'application/rss+xml',\n  rtf   : 'application/rtf',\n  ru    : 'text/x-script.ruby',\n  s     : 'text/x-asm',\n  sgm   : 'text/sgml',\n  sgml  : 'text/sgml',\n  sh    : 'application/x-sh',\n  sig   : 'application/pgp-signature',\n  snd   : 'audio/basic',\n  so    : 'application/octet-stream',\n  svg   : 'image/svg+xml',\n  svgz  : 'image/svg+xml',\n  swf   : 'application/x-shockwave-flash',\n  t     : 'text/troff',\n  tar   : 'application/x-tar',\n  tbz   : 'application/x-bzip-compressed-tar',\n  tcl   : 'application/x-tcl',\n  tex   : 'application/x-tex',\n  texi  : 'application/x-texinfo',\n  texinfo: 'application/x-texinfo',\n  text  : 'text/plain',\n  tif   : 'image/tiff',\n  tiff  : 'image/tiff',\n  torrent: 'application/x-bittorrent',\n  tr    : 'text/troff',\n  txt   : 'text/plain',\n  vcf   : 'text/x-vcard',\n  vcs   : 'text/x-vcalendar',\n  vrml  : 'model/vrml',\n  war   : 'application/java-archive',\n  wav   : 'audio/x-wav',\n  wma   : 'audio/x-ms-wma',\n  wmv   : 'video/x-ms-wmv',\n  wmx   : 'video/x-ms-wmx',\n  wrl   : 'model/vrml',\n  wsdl  : 'application/wsdl+xml',\n  xbm   : 'image/x-xbitmap',\n  xhtml : 'application/xhtml+xml',\n  xls   : 'application/vnd.ms-excel',\n  xml   : 'application/xml',\n  xpm   : 'image/x-xpixmap',\n  xsl   : 'application/xml',\n  xslt  : 'application/xslt+xml',\n  yaml  : 'text/yaml',\n  yml   : 'text/yaml',\n  zip   : 'application/zip'\n};\nmodule.exports = {\n  getExt: (path) => {\n    const i = path.lastIndexOf('.');\n    return extensions[path.substr(i + 1).toLowerCase()] || DEFAULT_EXT;\n  },\n  extensions\n};\n","const fs = require('fs');\nconst errHandler = (err) => { if (err) throw(err); };\nconst ext = require('./ext');\n\nfunction sendFile(res, path, reqHeaders, options) {\n  res.onAborted(errHandler);\n  fs.stat(path, (err, stat) => {\n    if (err) throw err;\n\n    // Return 304 if last-modified is same as request header\n    const lastModified = stat.mtime.toUTCString();\n    if (reqHeaders['if-modified-since']) {\n      if (new Date(reqHeaders['if-modified-since']).toUTCString() === lastModified) {\n        res.writeStatus('304 Not Modified');\n        return res.end();\n      }\n    }\n\n    if (options.contentType) res.writeHeader('content-type', ext(path));\n    if (options.lastModified) res.writeHeader('last-modified', lastModified);\n\n    // write data\n    const src = fs.createReadStream(path);\n    const totalSize = stat.size;\n\n    src.on('data', (buffer) => {\n      const chunk = buffer.buffer.slice(buffer.byteOffset, buffer.byteOffset + buffer.byteLength);\n      const lastOffset = res.getWriteOffset();\n\n      // First try\n      const [ok, done] = res.tryEnd(chunk, totalSize);\n\n      if (done) {\n        src.destroy();\n      } else if (!ok) {\n        // If we could not send this chunk, pause\n        src.pause();\n\n        // Save unsent chunk for when we can send it\n        res.ab = chunk;\n        res.abOffset = lastOffset;\n\n        // Register async handlers for drainage\n        res.onWritable((offset) => {\n          const [ok, done] = res.tryEnd(res.ab.slice(offset - res.abOffset), totalSize);\n          if (done) {\n            src.destroy();\n          } else if (ok) {\n            src.resume();\n          }\n          return ok;\n        });\n      }\n    }).on('error', res.close);\n    src.on('end', () => {\n      res.end();\n    });\n    res.onAborted(() => src.destroy());\n  });\n}\n\nmodule.exports = sendFile;","const delegate = require('./delegate');\nconst fs = require('fs');\nconst path = require('path');\nconst uWS = require('uWebSockets.js');\nconst sendFile = require('./sendfile');\n\nconst requiredHeaders = ['if-modified-since'];\nconst noOp = () => true;\n\nclass BaseApp {\n  file(folder, options = {}, base = folder) {\n    options = Object.assign({\n      lastModified: true,\n      contentType: true\n    }, options);\n    const filter = options.filter || noOp;\n    fs.readdirSync(folder).forEach(file => {\n      // Absolute path\n      const filePath = path.join(folder, file);\n\n      // Return if filtered\n      if (!filter(filePath)) return;\n\n      const serveFromThisFolder = this._serveFromFolder(folder, options);\n      if (fs.statSync(filePath).isDirectory()) {\n        // Recursive if directory\n        this.file(filePath, options, base);\n      } else {\n        // serve from this folder\n        this._app.get('/' + path.relative(base, filePath), serveFromThisFolder);\n      }\n    });\n    return this;\n  }\n\n  _serveFromFolder(folder, options) {\n    return (res, req) => {\n      const filePath = path.join(folder, req.getUrl().substr(1));\n      const reqHeaders = {};\n      requiredHeaders.forEach(k => reqHeaders[k] = req.getHeader(k));\n\n      if (options.headers) {\n        for (let n in options.headers) {\n          res.writeHeader(n, options.headers[n]);\n        }\n      }\n      sendFile(res, filePath, reqHeaders, options);\n    };\n  }\n\n  listen(h, p, cb) {\n    if (typeof cb === 'function') {\n      this._app.listen(h, p, (socket) => {\n        this._socket = socket;\n        cb(socket);\n      });\n    } else {\n      this._app.listen(h, (socket) => {\n        this._socket = socket;\n        p(socket);\n      });\n    }\n  }\n\n  close() {\n    if (this._socket) {\n      uWS.us_listen_socket_close(this._socket);\n      this._socket = null;\n    }\n  }\n}\n\nconst methods = [\n  'any',\n  'connect',\n  'del',\n  'get',\n  'head',\n  'listen',\n  'options',\n  'patch',\n  'post',\n  'put',\n  'trace',\n  'ws',\n];\n\ndelegate(methods, BaseApp.prototype, '_app');\n\nmodule.exports = BaseApp;\n","const uWS = require('uWebSockets.js');\nconst BaseApp = require('./baseapp');\n\nclass App extends BaseApp {\n  constructor(options) {\n    super(options);\n    this._app = uWS.App(options);\n  }\n}\n\nmodule.exports = App;\n","const uWS = require('uWebSockets.js');\nconst BaseApp = require('./baseapp');\n\nclass SSLApp extends BaseApp {\n  constructor(options) {\n    super(options);\n    this._app = uWS.SSLApp(options);\n  }\n}\n\nmodule.exports = SSLApp;\n","module.exports = {\n  App: require('./server/app'),\n  SSLApp: require('./server/sslapp'),\n  extensions: require('./server/ext').extensions,\n  getExtension: require('./server/ext').getExt\n};\n"],"names":["sendFile","uWS","BaseApp","require$$0","require$$1","require$$2"],"mappings":"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"}