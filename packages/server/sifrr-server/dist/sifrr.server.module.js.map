{"version":3,"file":"sifrr.server.module.js","sources":["../src/server/utils.js","../src/server/ext.js","../src/server/sendfile.js","../src/server/baseapp.js","../src/server/app.js","../src/server/sslapp.js","../src/sifrr.server.js"],"sourcesContent":["function writeHeaders(res, headers, other) {\n  if (typeof other !== 'undefined') {\n    res.writeHeader(headers, other.toString());\n  } else {\n    for (let n in headers) {\n      res.writeHeader(n, headers[n].toString());\n    }\n  }\n}\n\nfunction extend(who, from) {\n  const ownProps = Object.getOwnPropertyNames(from.prototype);\n  ownProps.forEach(prop => {\n    if (prop === 'constructor') return;\n    if (who[prop]) {\n      who[`_${prop}`] = who[prop];\n    }\n    who[prop] = from.prototype[prop].bind(who);\n  });\n}\n\nmodule.exports = {\n  writeHeaders,\n  extend\n};\n","const extensions = {\n  '3gp' : 'video/3gpp',\n  a     : 'application/octet-stream',\n  ai    : 'application/postscript',\n  aif   : 'audio/x-aiff',\n  aiff  : 'audio/x-aiff',\n  asc   : 'application/pgp-signature',\n  asf   : 'video/x-ms-asf',\n  asm   : 'text/x-asm',\n  asx   : 'video/x-ms-asf',\n  atom  : 'application/atom+xml',\n  au    : 'audio/basic',\n  avi   : 'video/x-msvideo',\n  bat   : 'application/x-msdownload',\n  bin   : 'application/octet-stream',\n  bmp   : 'image/bmp',\n  bz2   : 'application/x-bzip2',\n  c     : 'text/x-c',\n  cab   : 'application/vnd.ms-cab-compressed',\n  cc    : 'text/x-c',\n  chm   : 'application/vnd.ms-htmlhelp',\n  class : 'application/octet-stream',\n  com   : 'application/x-msdownload',\n  conf  : 'text/plain',\n  cpp   : 'text/x-c',\n  crt   : 'application/x-x509-ca-cert',\n  css   : 'text/css',\n  csv   : 'text/csv',\n  cxx   : 'text/x-c',\n  deb   : 'application/x-debian-package',\n  der   : 'application/x-x509-ca-cert',\n  diff  : 'text/x-diff',\n  djv   : 'image/vnd.djvu',\n  djvu  : 'image/vnd.djvu',\n  dll   : 'application/x-msdownload',\n  dmg   : 'application/octet-stream',\n  doc   : 'application/msword',\n  dot   : 'application/msword',\n  dtd   : 'application/xml-dtd',\n  dvi   : 'application/x-dvi',\n  ear   : 'application/java-archive',\n  eml   : 'message/rfc822',\n  eps   : 'application/postscript',\n  exe   : 'application/x-msdownload',\n  f     : 'text/x-fortran',\n  f77   : 'text/x-fortran',\n  f90   : 'text/x-fortran',\n  flv   : 'video/x-flv',\n  for   : 'text/x-fortran',\n  gem   : 'application/octet-stream',\n  gemspec: 'text/x-script.ruby',\n  gif   : 'image/gif',\n  gz    : 'application/x-gzip',\n  h     : 'text/x-c',\n  hh    : 'text/x-c',\n  htm   : 'text/html',\n  html  : 'text/html',\n  ico   : 'image/vnd.microsoft.icon',\n  ics   : 'text/calendar',\n  ifb   : 'text/calendar',\n  iso   : 'application/octet-stream',\n  jar   : 'application/java-archive',\n  java  : 'text/x-java-source',\n  jnlp  : 'application/x-java-jnlp-file',\n  jpeg  : 'image/jpeg',\n  jpg   : 'image/jpeg',\n  js    : 'application/javascript',\n  json  : 'application/json',\n  log   : 'text/plain',\n  m3u   : 'audio/x-mpegurl',\n  m4v   : 'video/mp4',\n  man   : 'text/troff',\n  mathml: 'application/mathml+xml',\n  mbox  : 'application/mbox',\n  mdoc  : 'text/troff',\n  me    : 'text/troff',\n  mid   : 'audio/midi',\n  midi  : 'audio/midi',\n  mime  : 'message/rfc822',\n  mml   : 'application/mathml+xml',\n  mng   : 'video/x-mng',\n  mov   : 'video/quicktime',\n  mp3   : 'audio/mpeg',\n  mp4   : 'video/mp4',\n  mp4v  : 'video/mp4',\n  mpeg  : 'video/mpeg',\n  mpg   : 'video/mpeg',\n  ms    : 'text/troff',\n  msi   : 'application/x-msdownload',\n  odp   : 'application/vnd.oasis.opendocument.presentation',\n  ods   : 'application/vnd.oasis.opendocument.spreadsheet',\n  odt   : 'application/vnd.oasis.opendocument.text',\n  ogg   : 'application/ogg',\n  p     : 'text/x-pascal',\n  pas   : 'text/x-pascal',\n  pbm   : 'image/x-portable-bitmap',\n  pdf   : 'application/pdf',\n  pem   : 'application/x-x509-ca-cert',\n  pgm   : 'image/x-portable-graymap',\n  pgp   : 'application/pgp-encrypted',\n  pkg   : 'application/octet-stream',\n  pl    : 'text/x-script.perl',\n  pm    : 'text/x-script.perl-module',\n  png   : 'image/png',\n  pnm   : 'image/x-portable-anymap',\n  ppm   : 'image/x-portable-pixmap',\n  pps   : 'application/vnd.ms-powerpoint',\n  ppt   : 'application/vnd.ms-powerpoint',\n  ps    : 'application/postscript',\n  psd   : 'image/vnd.adobe.photoshop',\n  py    : 'text/x-script.python',\n  qt    : 'video/quicktime',\n  ra    : 'audio/x-pn-realaudio',\n  rake  : 'text/x-script.ruby',\n  ram   : 'audio/x-pn-realaudio',\n  rar   : 'application/x-rar-compressed',\n  rb    : 'text/x-script.ruby',\n  rdf   : 'application/rdf+xml',\n  roff  : 'text/troff',\n  rpm   : 'application/x-redhat-package-manager',\n  rss   : 'application/rss+xml',\n  rtf   : 'application/rtf',\n  ru    : 'text/x-script.ruby',\n  s     : 'text/x-asm',\n  sgm   : 'text/sgml',\n  sgml  : 'text/sgml',\n  sh    : 'application/x-sh',\n  sig   : 'application/pgp-signature',\n  snd   : 'audio/basic',\n  so    : 'application/octet-stream',\n  svg   : 'image/svg+xml',\n  svgz  : 'image/svg+xml',\n  swf   : 'application/x-shockwave-flash',\n  t     : 'text/troff',\n  tar   : 'application/x-tar',\n  tbz   : 'application/x-bzip-compressed-tar',\n  tcl   : 'application/x-tcl',\n  tex   : 'application/x-tex',\n  texi  : 'application/x-texinfo',\n  texinfo: 'application/x-texinfo',\n  text  : 'text/plain',\n  tif   : 'image/tiff',\n  tiff  : 'image/tiff',\n  torrent: 'application/x-bittorrent',\n  tr    : 'text/troff',\n  txt   : 'text/plain',\n  vcf   : 'text/x-vcard',\n  vcs   : 'text/x-vcalendar',\n  vrml  : 'model/vrml',\n  war   : 'application/java-archive',\n  wav   : 'audio/x-wav',\n  wma   : 'audio/x-ms-wma',\n  wmv   : 'video/x-ms-wmv',\n  wmx   : 'video/x-ms-wmx',\n  wrl   : 'model/vrml',\n  wsdl  : 'application/wsdl+xml',\n  xbm   : 'image/x-xbitmap',\n  xhtml : 'application/xhtml+xml',\n  xls   : 'application/vnd.ms-excel',\n  xml   : 'application/xml',\n  xpm   : 'image/x-xpixmap',\n  xsl   : 'application/xml',\n  xslt  : 'application/xslt+xml',\n  yaml  : 'text/yaml',\n  yml   : 'text/yaml',\n  zip   : 'application/zip',\n  default: 'text/html'\n};\nmodule.exports = {\n  getExt: (path) => {\n    const i = path.lastIndexOf('.');\n    return extensions[path.substr(i + 1).toLowerCase()] || extensions['default'];\n  },\n  extensions\n};\n","const fs = require('fs');\nconst zlib = require('zlib');\n\nconst compressions = {\n  br: zlib.createBrotliCompress,\n  gzip: zlib.createGzip,\n  deflate: zlib.createDeflate\n};\nconst { writeHeaders } = require('./utils');\nconst ext = require('./ext').getExt;\nconst bytes = /bytes=/;\n\nfunction sendFile(res, req, path, { lastModified = true, headers = {}, compress = true, compressionOptions = {\n  priority: [ 'gzip', 'br', 'deflate' ]\n} } = {}) {\n  let { mtime, size } = fs.statSync(path);\n  const reqHeaders = {\n    'if-modified-since': req.getHeader('if-modified-since'),\n    range: req.getHeader('range'),\n    'accept-encoding': req.getHeader('accept-encoding')\n  };\n  mtime.setMilliseconds(0);\n\n  // handling last modified\n  if (lastModified) {\n    // Return 304 if last-modified\n    if (reqHeaders['if-modified-since']) {\n      if (new Date(reqHeaders['if-modified-since']) >= mtime) {\n        res.writeStatus('304 Not Modified');\n        return res.end();\n      }\n    }\n\n    headers['last-modified'] = mtime.toUTCString();\n  }\n\n  headers['content-type'] = ext(path);\n\n  // write data\n  let start = 0, end = size - 1;\n\n  if (reqHeaders.range) {\n    compress = false;\n    const parts = reqHeaders.range.replace(bytes, '').split('-');\n    start = parseInt(parts[0], 10);\n    end = parts[1] ? parseInt(parts[1], 10) : end;\n    headers['accept-ranges'] = 'bytes';\n    headers['content-range'] = `bytes ${start}-${end}/${size}`;\n    size = end - start + 1;\n    res.writeStatus('206 Partial Content');\n  }\n\n  if (end < 0) end = 0;\n\n  let readStream = fs.createReadStream(path, { start, end });\n  res.onAborted(() => readStream.destroy());\n\n  // Compression;\n  let compressed = false;\n  if (compress) {\n    const l = compressionOptions.priority.length;\n    for (let i = 0; i < l; i++) {\n      const type = compressionOptions.priority[i];\n      if (reqHeaders['accept-encoding'].indexOf(type) > -1) {\n        compressed = true;\n        const compressor = compressions[type](compressionOptions);\n        readStream.pipe(compressor);\n        readStream = compressor;\n        headers['content-encoding'] = compressionOptions.priority[i];\n        break;\n      }\n    }\n  }\n\n  writeHeaders(res, headers);\n  if (compressed) {\n    readStream.on('data', (buffer) => {\n      res.write(buffer.buffer.slice(buffer.byteOffset, buffer.byteOffset + buffer.byteLength));\n    });\n  } else {\n    readStream.on('data', (buffer) => {\n      const chunk = buffer.buffer.slice(buffer.byteOffset, buffer.byteOffset + buffer.byteLength),\n        lastOffset = res.getWriteOffset();\n\n      // First try\n      const [ok, done] = res.tryEnd(chunk, size);\n\n      if (done) {\n        readStream.destroy();\n      } else if (!ok) {\n        // pause because backpressure\n        readStream.pause();\n\n        // Save unsent chunk for later\n        res.ab = chunk;\n        res.abOffset = lastOffset;\n\n        // Register async handlers for drainage\n        res.onWritable((offset) => {\n          const [ok, done] = res.tryEnd(res.ab.slice(offset - res.abOffset), size);\n          if (done) {\n            readStream.destroy();\n          } else if (ok) {\n            readStream.resume();\n          }\n          return ok;\n        });\n      }\n    });\n\n  }\n  readStream\n    .on('error', res.close)\n    .on('end', () => {\n      res.end();\n    });\n}\n\nmodule.exports = sendFile;","const fs = require('fs');\nconst path = require('path');\nconst uWS = require('uWebSockets.js');\nconst sendFile = require('./sendfile');\n\nconst noOp = () => true;\n\nclass BaseApp {\n  file(pattern, path, options) {\n    this.get(pattern, (res, req) => {\n      sendFile(res, req, path, options);\n    });\n    return this;\n  }\n\n  folder(prefix, folder, options, base = folder) {\n    // not a folder\n    if (!fs.statSync(folder).isDirectory()) {\n      throw Error('Given path is not a directory: ' + folder);\n    }\n\n    // ensure slash in beginning and no trailing slash for prefix\n    if (prefix[0] !== '/') prefix = '/' + prefix;\n    if (prefix[prefix.length - 1] === '/') prefix = prefix.slice(0, -1);\n\n    // serve folder\n    const filter = options ? options.filter || noOp : noOp;\n    fs.readdirSync(folder).forEach(file => {\n      // Absolute path\n      const filePath = path.join(folder, file);\n\n      // Return if filtered\n      if (!filter(filePath)) return;\n\n      if (fs.statSync(filePath).isDirectory()) {\n        // Recursive if directory\n        this.folder(prefix, filePath, options, base);\n      } else {\n        // serve from this folder\n        const url = '/' + path.relative(base, filePath);\n        this._staticPaths[prefix + url] = [filePath, options ];\n        this.get(prefix + url, this._serveStatic);\n      }\n    });\n\n    fs.watch(folder, (event, filename) => {\n      if (event === 'rename') {\n        if (!filename) return;\n        const filePath = path.join(folder, filename);\n        const url = '/' + path.relative(base, filePath);\n        if (fs.existsSync(filePath)) {\n          this._staticPaths[prefix + url] = [filePath, options ];\n          this.get(prefix + url, this._serveStatic);\n        } else {\n          delete this._staticPaths[url];\n        }\n      }\n    });\n    return this;\n  }\n\n  _serveStatic(res, req) {\n    const options = this._staticPaths[req.getUrl()];\n    if (typeof options === 'undefined') {\n      res.writeStatus('404 Not Found');\n      res.end();\n    } else sendFile(res, req, options[0], options[1]);\n  }\n\n  listen(h, p = noOp, cb) {\n    if (typeof cb === 'function') {\n      this._listen(h, p, (socket) => {\n        this._socket = socket;\n        cb(socket);\n      });\n    } else {\n      this._listen(h, (socket) => {\n        this._socket = socket;\n        p(socket);\n      });\n    }\n    return this;\n  }\n\n  close() {\n    if (this._socket) {\n      uWS.us_listen_socket_close(this._socket);\n      this._socket = null;\n    }\n  }\n}\n\nmodule.exports = BaseApp;\n","const uWS = require('uWebSockets.js');\nconst BaseApp = require('./baseapp');\nconst { extend } = require('./utils');\n\nclass App extends uWS.App {\n  constructor(options) {\n    super(options);\n    this._staticPaths = {};\n    extend(this, BaseApp);\n  }\n}\n\nmodule.exports = App;\n","const uWS = require('uWebSockets.js');\nconst BaseApp = require('./baseapp');\nconst { extend } = require('./utils');\n\nclass SSLApp extends uWS.App {\n  constructor(options) {\n    super(options);\n    this._staticPaths = {};\n    extend(this, BaseApp);\n  }\n}\n\nmodule.exports = SSLApp;\n","module.exports = {\n  App: require('./server/app'),\n  SSLApp: require('./server/sslapp'),\n  extensions: require('./server/ext').extensions,\n  getExtension: require('./server/ext').getExt,\n  writeHeaders: require('./server/utils').writeHeaders,\n  sendFile: require('./server/sendfile')\n};\n"],"names":["writeHeaders","require$$0","ext","require$$1","sendFile","uWS","extend","BaseApp","require$$2","require$$3","require$$4"],"mappings":"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"}