{"version":3,"file":"sifrr.fetch.module.js","sources":["../src/request.js","../src/websocket.js","../src/sifrr.fetch.js"],"sourcesContent":["class Request {\n  constructor(url, options) {\n    this._options = options;\n    this._url = url;\n  }\n\n  get response() {\n    const me = this;\n    return window.fetch(this.url, this.options).then(resp => {\n      const contentType = resp.headers.get('content-type');\n      const isJson = contentType && (contentType.includes('application/json'));\n      if (resp.ok && typeof me._options.onProgress === 'function') {\n        const contentLength = resp.headers.get('content-length');\n        const total = parseInt(contentLength,10);\n        if (!total || !resp.body || !ReadableStream) {\n          me._options.onProgress(100);\n        } else {\n          const reader = resp.body.getReader();\n          let loaded = 0;\n          resp = new Response(new ReadableStream({\n            start(controller) {\n              const start = performance.now();\n              function read() {\n                return reader.read().then(({ done, value }) => {\n                  if (done) {\n                    me._options.onProgress(100, 0);\n                    controller.close();\n                  } else {\n                    loaded += value.byteLength;\n                    me._options.onProgress(loaded / total * 100, loaded / (performance.now() - start));\n                    controller.enqueue(value);\n                    return read();\n                  }\n                });\n              }\n              return read();\n            }\n          }));\n        }\n      } else if (!resp.ok) {\n        if (typeof me._options.onProgress === 'function') me._options.onProgress(100);\n        let error = Error(resp.statusText);\n        error.response = resp;\n        throw error;\n      }\n      return {\n        response: resp,\n        isJson\n      };\n    }).then(({ response, isJson }) => {\n      if(isJson) return response.json();\n      return response;\n    });\n  }\n\n  get url() {\n    const params = this._options.params;\n    if (params && Object.keys(params).length > 0) {\n      return this._url + '?' + Object.keys(params).map(k =>\n        encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n    } else {\n      return this._url;\n    }\n  }\n\n  get options() {\n    const options = Object.assign({\n      redirect: 'follow'\n    }, this._options);\n    options.headers = Object.assign({\n      accept: 'application/json'\n    }, this._options.headers || {});\n    if (options.body && options.body.constructor === ({}).constructor) {\n      options.headers['content-type'] = options.headers['content-type'] || 'application/json';\n      options.body = JSON.stringify(options.body);\n    }\n    return options;\n  }\n}\n\nmodule.exports = Request;\n","class WebSocket {\n  constructor(url, protocol, fallback = () => Promise.reject(Error('No fallback provided for websocket failure.'))) {\n    this.url = url;\n    this.protocol = protocol;\n    this._fallback = !window.WebSocket;\n    this.fallback = fallback;\n    this.id = 1;\n    this._requests = {};\n    this._openSocket();\n  }\n\n  send(data, type) {\n    if (data.constructor === ({}).constructor) {\n      return this.sendJSON(data, type);\n    } else {\n      return this.sendRaw(data, this.id++);\n    }\n  }\n\n  sendJSON(data, type = 'JSON') {\n    const message = {};\n    message.sifrrQueryType = type;\n    message.sifrrQueryId = this.id++;\n    message.data = data;\n    return this.sendRaw(JSON.stringify(message), message.sifrrQueryId, data);\n  }\n\n  sendRaw(message, id, original = message) {\n    if (this._fallback) return this.fallback(original);\n    return this._openSocket().then(ws => {\n      ws.send(message);\n      return new Promise((res) => {\n        this._requests[id] = {\n          res: (v) => {\n            delete this._requests[id];\n            res(v);\n          },\n          original\n        };\n      });\n    }).catch((e) => {\n      window.console.error(e);\n      return this.fallback(original);\n    });\n  }\n\n  _openSocket() {\n    if (!this.ws) {\n      this.ws = new window.WebSocket(this.url, this.protocol);\n      this.ws.onopen = this.onopen.bind(this);\n      this.ws.onerror = this.onerror.bind(this);\n      this.ws.onclose = this.onclose.bind(this);\n      this.ws.onmessage = this._onmessage.bind(this);\n    } else if (this.ws.readyState === this.ws.OPEN) {\n      return Promise.resolve(this.ws);\n    } else if (this.ws.readyState !== this.ws.CONNECTING) {\n      this.ws = null;\n      return this._openSocket();\n    }\n    const me = this;\n    return new Promise((res, rej) => {\n      function waiting() {\n        if (me.ws.readyState === me.ws.CONNECTING) {\n          window.requestAnimationFrame(waiting);\n        } else if (me.ws.readyState !== me.ws.OPEN) {\n          rej(Error(`Failed to open socket on ${me.url}`));\n        } else {\n          res(me.ws);\n        }\n      }\n      window.requestAnimationFrame(waiting);\n    });\n  }\n\n  onerror() {\n    this._fallback = !!this.fallback;\n    for (let r in this._requests) {\n      const req = this._requests[r];\n      this.fallback(req.data).then(result => req.res(result));\n    }\n  }\n\n  onopen() {}\n\n  onclose() {}\n\n  close() {\n    this.ws.close();\n  }\n\n  _onmessage(event) {\n    const data = JSON.parse(event.data);\n    if (data.sifrrQueryId) this._requests[data.sifrrQueryId].res(data.data);\n    delete this._requests[data.sifrrQueryId];\n    this.onmessage(event);\n  }\n\n  onmessage() {}\n}\n\nmodule.exports = WebSocket;\n","const Request = require('./request');\nconst WebSocket = require('./websocket');\n\nclass SifrrFetch {\n  static get(purl, poptions) {\n    return this.request(purl, poptions, 'GET');\n  }\n\n  static post(purl, poptions) {\n    return this.request(purl, poptions, 'POST');\n  }\n\n  static put(purl, poptions) {\n    return this.request(purl, poptions, 'PUT');\n  }\n\n  static delete(purl, poptions) {\n    return this.request(purl, poptions, 'DELETE');\n  }\n\n  static graphql(purl, poptions) {\n    const { query, variables = {} } = poptions;\n    delete poptions.query;\n    delete poptions.variables;\n    poptions.headers = poptions.headers || {};\n    poptions.headers['Content-Type'] = 'application/json';\n    poptions.headers['Accept'] = 'application/json';\n    poptions.body = {\n      query,\n      variables\n    };\n    return this.request(purl, poptions, 'POST');\n  }\n\n  static socket(url, protocol, fallback) {\n    return new WebSocket(url, protocol, fallback ? (message) => {\n      const options = {}, method = fallback.method.toLowerCase();\n      options.headers = options.headers || {};\n      options.headers['content-type'] = options.headers['content-type'] || 'application/json';\n      if (method === 'post') options.body = message;\n      else options.query = message;\n      return this[method](fallback.url, options);\n    } : undefined);\n  }\n\n  static file(purl, poptions = {}) {\n    poptions.headers = poptions.headers || {};\n    poptions.headers.accept = poptions.headers.accept || '*/*';\n    return this.request(purl, poptions, 'GET');\n  }\n\n  static request(purl, poptions, method) {\n    const { url, options } = this.afterUse(purl, poptions, method);\n    return new Request(url, options).response;\n  }\n\n  static use(fxn) {\n    SifrrFetch._middlewares.push(fxn);\n  }\n\n  static afterUse(url, options = {}, method) {\n    options.method = (options.method  || method).toUpperCase();\n    SifrrFetch._middlewares.forEach((fxn) => {\n      const res = fxn(url, options);\n      url = res.url;\n      options = res.options;\n    });\n    return { url, options };\n  }\n}\n\nSifrrFetch._middlewares = [];\nSifrrFetch.WebSocket = WebSocket;\n\nmodule.exports = SifrrFetch;\n"],"names":["WebSocket","Request"],"mappings":"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"}