{"version":3,"file":"sifrr.storage.js","sources":["../src/utils/json.js","../src/storages/storage.js","../src/storages/indexeddb.js","../src/storages/websql.js","../src/storages/localstorage.js","../src/storages/cookies.js","../src/storages/jsonstorage.js","../src/storages.js","../src/sifrr.storage.js"],"sourcesContent":["const toS = Object.prototype.toString;\nconst l = 6, uId = Math.random().toString(36).slice(-1 * l);\n\nclass Json {\n  static parse(data) {\n    let ans = data;\n    if (typeof data === 'string') {\n      try {\n        ans = this.parse(JSON.parse(data));\n      } catch(e) {\n        // do nothing\n      }\n      if (typeof ans === 'string') {\n        const i = ans.indexOf(uId);\n        if (i > 0) {\n          const [type, av] = ans.split(uId);\n          if (type === 'ArrayBuffer') ans = new window.Uint8Array(av.split(',')).buffer;\n          else ans = new window[type](av.split(','));\n        }\n      }\n    } else if (Array.isArray(data)) {\n      ans = [];\n      data.forEach((v, i) => {\n        ans[i] = this.parse(v);\n      });\n    } else if (typeof data === 'object') {\n      if (data === null) return null;\n      ans = {};\n      for (const k in data) {\n        ans[k] = this.parse(data[k]);\n      }\n    }\n    return ans;\n  }\n\n  static stringify(data) {\n    if (typeof data !== 'object') return data;\n    if (data === null) return null;\n    let ans;\n    const type = toS.call(data).slice(8, -1);\n    switch (type) {\n    case 'Object':\n      ans = {};\n      for (let k in data) {\n        ans[k] = this.stringify(data[k]);\n      }\n      ans = JSON.stringify(ans);\n      break;\n    case 'ArrayBuffer':\n      ans = type + uId + new window.Uint8Array(data).toString();\n      break;\n    default:\n      ans = type + uId + data.toString();\n      break;\n    }\n    return ans;\n  }\n}\n\nmodule.exports = Json;\n","const JsonExt = require('../utils/json');\nconst jsonConstructor = {}.constructor;\n\nclass Storage {\n  constructor(options = {}) {\n    this._options = options;\n    this.name = this._options.name;\n    this.version = this._options.version;\n    this.tableName = this.name + this.version;\n    this.description = this._options.description;\n    this.type = this.constructor.type;\n  }\n\n  _parseKeyValue(key, value) {\n    if (typeof value === 'undefined') {\n      if (Array.isArray(key)) {\n        return key;\n      } else if (typeof key === 'string') {\n        return [key];\n      } else if (key.constructor === jsonConstructor) {\n        return key;\n      } {\n        throw Error('Invalid Key');\n      }\n    } else if (typeof key === 'string') {\n      let ans = {};\n      ans[key] = value;\n      return ans;\n    } else {\n      throw Error('Invalid Key');\n    }\n  }\n\n  _select(keys) {\n    return this.all().then((data) => {\n      let ans = {};\n      keys.forEach((key) => ans[key] = data[key]);\n      return ans;\n    });\n  }\n\n  _upsert(data) {\n    let table = this.table;\n    for (let key in data) {\n      table[key] = data[key];\n    }\n    this.table = table;\n  }\n\n  _delete(keys) {\n    let table = this.table;\n    keys.forEach((key) => delete table[key]);\n    this.table = table;\n  }\n\n  _clear() {\n    this.table = {};\n  }\n\n  _isEqual(options, type) {\n    if (this.tableName == options.name + options.version && this.type == type) { return true; }\n    else { return false; }\n  }\n\n  isSupported(force = true) {\n    if (force && (typeof window === 'undefined' || typeof document === 'undefined')) { return true; }\n    else if (window && typeof this.store !== 'undefined') { return true; }\n    else { return false; }\n  }\n\n  keys() {\n    return this.all().then(d => Object.keys(d));\n  }\n\n  all() {\n    return Promise.resolve(this._parsedData());\n  }\n\n  get(key) {\n    return Promise.resolve(this._select(this._parseKeyValue(key)));\n  }\n\n  set(key, value) {\n    return Promise.resolve(this._upsert(this._parseKeyValue(key, value)));\n  }\n\n  del(key) {\n    return Promise.resolve(this._delete(this._parseKeyValue(key)));\n  }\n\n  clear() {\n    return Promise.resolve(this._clear());\n  }\n\n  static stringify(data) {\n    return JsonExt.stringify(data);\n  }\n\n  static parse(data) {\n    return JsonExt.parse(data);\n  }\n}\n\nmodule.exports = Storage;\n","const Storage = require('./storage');\n\nclass IndexedDB extends Storage {\n  constructor(options) {\n    super(options);\n  }\n\n  _parsedData() {\n    return this._tx('readonly', 'getAllKeys').then(this._select.bind(this));\n  }\n\n  _select(keys) {\n    const ans = {};\n    const promises = [];\n    keys.forEach((key) => promises.push(this._tx('readonly', 'get', key).then((r) => ans[key] = r)));\n    return Promise.all(promises).then(() => ans);\n  }\n\n  _upsert(data) {\n    const promises = [];\n    for (let key in data) {\n      const promise = this._tx('readwrite', 'put', data[key], key);\n      promises.push(promise);\n    }\n    return Promise.all(promises);\n  }\n\n  _delete(keys) {\n    const promises = [];\n    keys.forEach((key) => promises.push(this._tx('readwrite', 'delete', key)));\n    return Promise.all(promises);\n  }\n\n  _clear() {\n    return this._tx('readwrite', 'clear');\n  }\n\n  _tx(scope, fn, param1, param2) {\n    const me = this;\n    this._store = this._store || this.createStore(me.tableName);\n    return this._store.then((db) => {\n      return new Promise((resolve, reject) => {\n        const tx = db.transaction(me.tableName, scope).objectStore(me.tableName);\n        const request = tx[fn].call(tx, param1, param2);\n        request.onsuccess = (event) =>  resolve(event.target.result);\n        request.onerror = (event) => reject(event.error);\n      });\n    });\n  }\n\n  get store() {\n    return window.indexedDB;\n  }\n\n  createStore(table) {\n    return new Promise((resolve, reject) => {\n      const request = this.store.open(table, 1);\n      request.onupgradeneeded = (event) => {\n        const db = event.target.result;\n        db.createObjectStore(table);\n      };\n      request.onsuccess = () => resolve(request.result);\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  static get type() {\n    return 'indexeddb';\n  }\n}\n\nmodule.exports = IndexedDB;\n","const Storage = require('./storage');\n\nclass WebSQL extends Storage {\n  constructor(options) {\n    super(options);\n    this.createStore();\n  }\n\n  _parsedData() {\n    const me = this;\n    return new Promise((resolve) => {\n      this.store.transaction(function (tx) {\n        tx.executeSql(`SELECT * FROM ${me.tableName}`, [], (txn, results) => {\n          resolve(me.parse(results));\n        });\n      });\n    });\n  }\n\n  _select(keys) {\n    const me = this;\n    const q = keys.map(() => '?').join(', ');\n    // Need to give array for ? values in executeSql's 2nd argument\n    return this.execSql(`SELECT key, value FROM ${me.tableName} WHERE key in (${q})`, keys);\n  }\n\n  _upsert(data) {\n    const table = this.tableName;\n    this.store.transaction((tx) => {\n      for (let key in data) {\n        tx.executeSql(`INSERT OR REPLACE INTO ${table}(key, value) VALUES (?, ?)`, [key, this.constructor.stringify(data[key])]);\n      }\n    });\n  }\n\n  _delete(keys) {\n    const table = this.tableName;\n    const q = keys.map(() => '?').join(', ');\n    return this.execSql(`DELETE FROM ${table} WHERE key in (${q})`, keys);\n  }\n\n  _clear() {\n    const table = this.tableName;\n    return this.execSql(`DELETE FROM ${table}`);\n  }\n\n  get store() {\n    return window.openDatabase('bs', 1, this._options.description, this._options.size);\n  }\n\n  createStore() {\n    const table = this.tableName;\n    if (!window || typeof window.openDatabase !== 'function') return;\n    return this.execSql(`CREATE TABLE IF NOT EXISTS ${table} (key unique, value)`);\n  }\n\n  execSql(query, args = []) {\n    const me = this;\n    return new Promise((resolve) => {\n      me.store.transaction(function (tx) {\n        tx.executeSql(query, args, (txn, results) => {\n          resolve(me.parse(results));\n        });\n      });\n    });\n  }\n\n  parse(results) {\n    const ans = {};\n    const len = results.rows.length;\n    for (let i = 0; i < len; i++) {\n      ans[results.rows.item(i).key] = this.constructor.parse(results.rows.item(i).value);\n    }\n    return ans;\n  }\n\n  static get type() {\n    return 'websql';\n  }\n}\n\nmodule.exports = WebSQL;\n","const Storage = require('./storage');\n\nclass LocalStorage extends Storage {\n  constructor(options) {\n    super(options);\n  }\n\n  _parsedData() {\n    return this.table;\n  }\n\n  _select(keys) {\n    const table = {};\n    keys.forEach(k => {\n      const v = this.constructor.parse(this.store.getItem(this.tableName + '/' + k));\n      if (v !== null) table[k] = v;\n    });\n    return table;\n  }\n\n  _upsert(data) {\n    for (let key in data) {\n      this.store.setItem(this.tableName + '/' + key, this.constructor.stringify(data[key]));\n    }\n    return true;\n  }\n\n  _delete(keys) {\n    return keys.map(k => this.store.removeItem(this.tableName + '/' + k));\n  }\n\n  _clear() {\n    Object.keys(this.store).forEach(k => {\n      if (k.indexOf(this.tableName) === 0) this.store.removeItem(k);\n    });\n    return true;\n  }\n\n  get table() {\n    return this._select(Object.keys(this.store).map(k => {\n      if (k.indexOf(this.tableName) === 0) return k.slice(this.tableName.length + 1);\n    }).filter(k => typeof k !== 'undefined'));\n  }\n\n  get store() {\n    return window.localStorage;\n  }\n\n  static get type() {\n    return 'localstorage';\n  }\n}\n\nmodule.exports = LocalStorage;\n","const Storage = require('./storage');\n\nclass Cookies extends Storage {\n  constructor(options) {\n    super(options);\n  }\n\n  _parsedData() {\n    return this.table;\n  }\n\n  get table() {\n    let result = this.store, ans = {};\n    result.split('; ').forEach((value) => {\n      let [k, v] = value.split('=');\n      ans[k] = this.constructor.parse(v);\n    });\n    return ans[this.tableName] || {};\n  }\n\n  set table(value) {\n    document.cookie = `${this.tableName}=${Storage.stringify(value)}; path=/`;\n  }\n\n  get store() {\n    return document.cookie;\n  }\n\n  static get type() {\n    return 'cookies';\n  }\n}\n\nmodule.exports = Cookies;\n","const Storage = require('./storage');\n\nclass JsonStorage extends Storage {\n  constructor(options, data = {}) {\n    super(options);\n    this.table = Storage.parse(data);\n  }\n\n  _parsedData() {\n    return this.table;\n  }\n\n  _upsert(data) {\n    for (let key in data) {\n      this.table[key] = data[key];\n    }\n  }\n\n  get store() {\n    return this.table;\n  }\n\n  static get type() {\n    return 'jsonstorage';\n  }\n}\n\nmodule.exports = JsonStorage;\n","const IndexedDB = require('./storages/indexeddb');\nconst WebSQL = require('./storages/websql');\nconst LocalStorage = require('./storages/localstorage');\nconst Cookies = require('./storages/cookies');\nconst JsonStorage = require('./storages/jsonstorage');\n\nlet storages = {};\nstorages[IndexedDB.type] = IndexedDB;\nstorages[WebSQL.type] = WebSQL;\nstorages[LocalStorage.type] = LocalStorage;\nstorages[Cookies.type] = Cookies;\nstorages[JsonStorage.type] = JsonStorage;\n\nmodule.exports = storages;\n","const storages = require('./storages');\nconst JsonStorage = require('./storages/jsonstorage');\n\nclass SifrrStorage {\n  constructor(options) {\n    if (typeof options === 'string') options = { priority: [options] }; else options = options || {};\n    this._options = Object.assign(this.constructor.defaultOptions, options);\n    return this.storage;\n  }\n\n  get storage() {\n    let storage = this.supportedStore();\n    if (typeof storage === 'undefined') throw Error('No available storage supported in this browser');\n    let matchingInstance = this.constructor._matchingInstance(this._options, storage.type);\n    if (matchingInstance) { return matchingInstance; }\n    else {\n      let storageInstance = new storage(this._options);\n      this.constructor._add(storageInstance);\n      return storageInstance;\n    }\n  }\n\n  get priority() {\n    return this._options.priority.concat(['indexeddb', 'websql', 'localstorage', 'cookies', 'jsonstorage']);\n  }\n\n  supportedStore() {\n    for (let i = 0; i < this.priority.length; i++) {\n      let store = this.constructor.availableStores[this.priority[i]];\n      if (store && new store(this._options).isSupported()) return store;\n    }\n  }\n\n  static _matchingInstance(options, type) {\n    let allInstances = this.all, i;\n    let length = allInstances.length;\n    for (i = 0; i < length; i++) {\n      if (allInstances[i]._isEqual(options, type)) return allInstances[i];\n    }\n    return false;\n  }\n\n  static _add(instance) {\n    this.all.push(instance);\n  }\n\n  static get defaultOptions() {\n    return {\n      priority: [],\n      name: 'SifrrStorage',\n      version: 1,\n      description: 'Sifrr Storage',\n      size: 5 * 1024 * 1024\n    };\n  }\n\n  static json(data) {\n    return new JsonStorage({}, data);\n  }\n}\n\nSifrrStorage.availableStores = storages;\nSifrrStorage.all = [];\n\nmodule.exports = SifrrStorage;\n"],"names":["toS","Object","prototype","toString","l","uId","Math","random","slice","Json","parse","data","ans","JSON","e","i","indexOf","type","av","split","window","Uint8Array","buffer","Array","isArray","forEach","v","k","stringify","call","jsonConstructor","constructor","Storage","options","_options","name","version","tableName","description","_parseKeyValue","key","value","Error","_select","keys","all","then","_upsert","table","_delete","_clear","_isEqual","isSupported","force","document","store","d","Promise","resolve","_parsedData","get","set","del","clear","JsonExt","IndexedDB","_tx","bind","promises","push","r","promise","scope","fn","param1","param2","me","_store","createStore","db","reject","tx","transaction","objectStore","request","onsuccess","event","target","result","onerror","error","indexedDB","open","onupgradeneeded","createObjectStore","WebSQL","executeSql","txn","results","q","map","join","execSql","openDatabase","size","query","args","len","rows","length","item","LocalStorage","getItem","setItem","removeItem","filter","localStorage","Cookies","cookie","JsonStorage","storages","SifrrStorage","priority","assign","defaultOptions","storage","supportedStore","matchingInstance","_matchingInstance","storageInstance","_add","concat","availableStores","allInstances","instance","json"],"mappings":";;;;;;;EAAA,MAAMA,GAAG,GAAGC,MAAM,CAACC,SAAP,CAAiBC,QAA7B;EACA,MAAMC,CAAC,GAAG,CAAV;EAAA,MAAaC,GAAG,GAAGC,IAAI,CAACC,MAAL,GAAcJ,QAAd,CAAuB,EAAvB,EAA2BK,KAA3B,CAAiC,CAAC,CAAD,GAAKJ,CAAtC,CAAnB;EAEA,MAAMK,IAAN,CAAW;EACT,SAAOC,KAAP,CAAaC,IAAb,EAAmB;EACjB,QAAIC,GAAG,GAAGD,IAAV;EACA,QAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;EAC5B,UAAI;EACFC,QAAAA,GAAG,GAAG,KAAKF,KAAL,CAAWG,IAAI,CAACH,KAAL,CAAWC,IAAX,CAAX,CAAN;EACD,OAFD,CAEE,OAAMG,CAAN,EAAS;EAEV;EACD,UAAI,OAAOF,GAAP,KAAe,QAAnB,EAA6B;EAC3B,cAAMG,CAAC,GAAGH,GAAG,CAACI,OAAJ,CAAYX,GAAZ,CAAV;EACA,YAAIU,CAAC,GAAG,CAAR,EAAW;EACT,gBAAM,CAACE,IAAD,EAAOC,EAAP,IAAaN,GAAG,CAACO,KAAJ,CAAUd,GAAV,CAAnB;EACA,cAAIY,IAAI,KAAK,aAAb,EAA4BL,GAAG,GAAG,IAAIQ,MAAM,CAACC,UAAX,CAAsBH,EAAE,CAACC,KAAH,CAAS,GAAT,CAAtB,EAAqCG,MAA3C,CAA5B,KACKV,GAAG,GAAG,IAAIQ,MAAM,CAACH,IAAD,CAAV,CAAiBC,EAAE,CAACC,KAAH,CAAS,GAAT,CAAjB,CAAN;EACN;EACF;EACF,KAdD,MAcO,IAAII,KAAK,CAACC,OAAN,CAAcb,IAAd,CAAJ,EAAyB;EAC9BC,MAAAA,GAAG,GAAG,EAAN;EACAD,MAAAA,IAAI,CAACc,OAAL,CAAa,CAACC,CAAD,EAAIX,CAAJ,KAAU;EACrBH,QAAAA,GAAG,CAACG,CAAD,CAAH,GAAS,KAAKL,KAAL,CAAWgB,CAAX,CAAT;EACD,OAFD;EAGD,KALM,MAKA,IAAI,OAAOf,IAAP,KAAgB,QAApB,EAA8B;EACnC,UAAIA,IAAI,KAAK,IAAb,EAAmB,OAAO,IAAP;EACnBC,MAAAA,GAAG,GAAG,EAAN;EACA,WAAK,MAAMe,CAAX,IAAgBhB,IAAhB,EAAsB;EACpBC,QAAAA,GAAG,CAACe,CAAD,CAAH,GAAS,KAAKjB,KAAL,CAAWC,IAAI,CAACgB,CAAD,CAAf,CAAT;EACD;EACF;EACD,WAAOf,GAAP;EACD;EAED,SAAOgB,SAAP,CAAiBjB,IAAjB,EAAuB;EACrB,QAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B,OAAOA,IAAP;EAC9B,QAAIA,IAAI,KAAK,IAAb,EAAmB,OAAO,IAAP;EACnB,QAAIC,GAAJ;EACA,UAAMK,IAAI,GAAGjB,GAAG,CAAC6B,IAAJ,CAASlB,IAAT,EAAeH,KAAf,CAAqB,CAArB,EAAwB,CAAC,CAAzB,CAAb;EACA,YAAQS,IAAR;EACA,WAAK,QAAL;EACEL,QAAAA,GAAG,GAAG,EAAN;EACA,aAAK,IAAIe,CAAT,IAAchB,IAAd,EAAoB;EAClBC,UAAAA,GAAG,CAACe,CAAD,CAAH,GAAS,KAAKC,SAAL,CAAejB,IAAI,CAACgB,CAAD,CAAnB,CAAT;EACD;EACDf,QAAAA,GAAG,GAAGC,IAAI,CAACe,SAAL,CAAehB,GAAf,CAAN;EACA;EACF,WAAK,aAAL;EACEA,QAAAA,GAAG,GAAGK,IAAI,GAAGZ,GAAP,GAAa,IAAIe,MAAM,CAACC,UAAX,CAAsBV,IAAtB,EAA4BR,QAA5B,EAAnB;EACA;EACF;EACES,QAAAA,GAAG,GAAGK,IAAI,GAAGZ,GAAP,GAAaM,IAAI,CAACR,QAAL,EAAnB;EACA;EAbF;EAeA,WAAOS,GAAP;EACD;EArDQ;EAwDX,QAAc,GAAGH,IAAjB;;EC1DA,MAAMqB,eAAe,GAAG,GAAGC,WAA3B;EAEA,MAAMC,OAAN,CAAc;EACZD,EAAAA,WAAW,CAACE,OAAO,GAAG,EAAX,EAAe;EACxB,SAAKC,QAAL,GAAgBD,OAAhB;EACA,SAAKE,IAAL,GAAY,KAAKD,QAAL,CAAcC,IAA1B;EACA,SAAKC,OAAL,GAAe,KAAKF,QAAL,CAAcE,OAA7B;EACA,SAAKC,SAAL,GAAiB,KAAKF,IAAL,GAAY,KAAKC,OAAlC;EACA,SAAKE,WAAL,GAAmB,KAAKJ,QAAL,CAAcI,WAAjC;EACA,SAAKrB,IAAL,GAAY,KAAKc,WAAL,CAAiBd,IAA7B;EACD;EAEDsB,EAAAA,cAAc,CAACC,GAAD,EAAMC,KAAN,EAAa;EACzB,QAAI,OAAOA,KAAP,KAAiB,WAArB,EAAkC;EAChC,UAAIlB,KAAK,CAACC,OAAN,CAAcgB,GAAd,CAAJ,EAAwB;EACtB,eAAOA,GAAP;EACD,OAFD,MAEO,IAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;EAClC,eAAO,CAACA,GAAD,CAAP;EACD,OAFM,MAEA,IAAIA,GAAG,CAACT,WAAJ,KAAoBD,eAAxB,EAAyC;EAC9C,eAAOU,GAAP;EACD;EAAC;EACA,cAAME,KAAK,CAAC,aAAD,CAAX;EACD;EACF,KAVD,MAUO,IAAI,OAAOF,GAAP,KAAe,QAAnB,EAA6B;EAClC,UAAI5B,GAAG,GAAG,EAAV;EACAA,MAAAA,GAAG,CAAC4B,GAAD,CAAH,GAAWC,KAAX;EACA,aAAO7B,GAAP;EACD,KAJM,MAIA;EACL,YAAM8B,KAAK,CAAC,aAAD,CAAX;EACD;EACF;EAEDC,EAAAA,OAAO,CAACC,IAAD,EAAO;EACZ,WAAO,KAAKC,GAAL,GAAWC,IAAX,CAAiBnC,IAAD,IAAU;EAC/B,UAAIC,GAAG,GAAG,EAAV;EACAgC,MAAAA,IAAI,CAACnB,OAAL,CAAce,GAAD,IAAS5B,GAAG,CAAC4B,GAAD,CAAH,GAAW7B,IAAI,CAAC6B,GAAD,CAArC;EACA,aAAO5B,GAAP;EACD,KAJM,CAAP;EAKD;EAEDmC,EAAAA,OAAO,CAACpC,IAAD,EAAO;EACZ,QAAIqC,KAAK,GAAG,KAAKA,KAAjB;EACA,SAAK,IAAIR,GAAT,IAAgB7B,IAAhB,EAAsB;EACpBqC,MAAAA,KAAK,CAACR,GAAD,CAAL,GAAa7B,IAAI,CAAC6B,GAAD,CAAjB;EACD;EACD,SAAKQ,KAAL,GAAaA,KAAb;EACD;EAEDC,EAAAA,OAAO,CAACL,IAAD,EAAO;EACZ,QAAII,KAAK,GAAG,KAAKA,KAAjB;EACAJ,IAAAA,IAAI,CAACnB,OAAL,CAAce,GAAD,IAAS,OAAOQ,KAAK,CAACR,GAAD,CAAlC;EACA,SAAKQ,KAAL,GAAaA,KAAb;EACD;EAEDE,EAAAA,MAAM,GAAG;EACP,SAAKF,KAAL,GAAa,EAAb;EACD;EAEDG,EAAAA,QAAQ,CAAClB,OAAD,EAAUhB,IAAV,EAAgB;EACtB,QAAI,KAAKoB,SAAL,IAAkBJ,OAAO,CAACE,IAAR,GAAeF,OAAO,CAACG,OAAzC,IAAoD,KAAKnB,IAAL,IAAaA,IAArE,EAA2E;EAAE,aAAO,IAAP;EAAc,KAA3F,MACK;EAAE,aAAO,KAAP;EAAe;EACvB;EAEDmC,EAAAA,WAAW,CAACC,KAAK,GAAG,IAAT,EAAe;EACxB,QAAIA,KAAK,KAAK,OAAOjC,MAAP,KAAkB,WAAlB,IAAiC,OAAOkC,QAAP,KAAoB,WAA1D,CAAT,EAAiF;EAAE,aAAO,IAAP;EAAc,KAAjG,MACK,IAAIlC,MAAM,IAAI,OAAO,KAAKmC,KAAZ,KAAsB,WAApC,EAAiD;EAAE,aAAO,IAAP;EAAc,KAAjE,MACA;EAAE,aAAO,KAAP;EAAe;EACvB;EAEDX,EAAAA,IAAI,GAAG;EACL,WAAO,KAAKC,GAAL,GAAWC,IAAX,CAAgBU,CAAC,IAAIvD,MAAM,CAAC2C,IAAP,CAAYY,CAAZ,CAArB,CAAP;EACD;EAEDX,EAAAA,GAAG,GAAG;EACJ,WAAOY,OAAO,CAACC,OAAR,CAAgB,KAAKC,WAAL,EAAhB,CAAP;EACD;EAEDC,EAAAA,GAAG,CAACpB,GAAD,EAAM;EACP,WAAOiB,OAAO,CAACC,OAAR,CAAgB,KAAKf,OAAL,CAAa,KAAKJ,cAAL,CAAoBC,GAApB,CAAb,CAAhB,CAAP;EACD;EAEDqB,EAAAA,GAAG,CAACrB,GAAD,EAAMC,KAAN,EAAa;EACd,WAAOgB,OAAO,CAACC,OAAR,CAAgB,KAAKX,OAAL,CAAa,KAAKR,cAAL,CAAoBC,GAApB,EAAyBC,KAAzB,CAAb,CAAhB,CAAP;EACD;EAEDqB,EAAAA,GAAG,CAACtB,GAAD,EAAM;EACP,WAAOiB,OAAO,CAACC,OAAR,CAAgB,KAAKT,OAAL,CAAa,KAAKV,cAAL,CAAoBC,GAApB,CAAb,CAAhB,CAAP;EACD;EAEDuB,EAAAA,KAAK,GAAG;EACN,WAAON,OAAO,CAACC,OAAR,CAAgB,KAAKR,MAAL,EAAhB,CAAP;EACD;EAED,SAAOtB,SAAP,CAAiBjB,IAAjB,EAAuB;EACrB,WAAOqD,IAAO,CAACpC,SAAR,CAAkBjB,IAAlB,CAAP;EACD;EAED,SAAOD,KAAP,CAAaC,IAAb,EAAmB;EACjB,WAAOqD,IAAO,CAACtD,KAAR,CAAcC,IAAd,CAAP;EACD;EAjGW;EAoGd,WAAc,GAAGqB,OAAjB;;ECrGA,MAAMiC,SAAN,SAAwBjC,OAAxB,CAAgC;EAC9BD,EAAAA,WAAW,CAACE,OAAD,EAAU;EACnB,UAAMA,OAAN;EACD;EAED0B,EAAAA,WAAW,GAAG;EACZ,WAAO,KAAKO,GAAL,CAAS,UAAT,EAAqB,YAArB,EAAmCpB,IAAnC,CAAwC,KAAKH,OAAL,CAAawB,IAAb,CAAkB,IAAlB,CAAxC,CAAP;EACD;EAEDxB,EAAAA,OAAO,CAACC,IAAD,EAAO;EACZ,UAAMhC,GAAG,GAAG,EAAZ;EACA,UAAMwD,QAAQ,GAAG,EAAjB;EACAxB,IAAAA,IAAI,CAACnB,OAAL,CAAce,GAAD,IAAS4B,QAAQ,CAACC,IAAT,CAAc,KAAKH,GAAL,CAAS,UAAT,EAAqB,KAArB,EAA4B1B,GAA5B,EAAiCM,IAAjC,CAAuCwB,CAAD,IAAO1D,GAAG,CAAC4B,GAAD,CAAH,GAAW8B,CAAxD,CAAd,CAAtB;EACA,WAAOb,OAAO,CAACZ,GAAR,CAAYuB,QAAZ,EAAsBtB,IAAtB,CAA2B,MAAMlC,GAAjC,CAAP;EACD;EAEDmC,EAAAA,OAAO,CAACpC,IAAD,EAAO;EACZ,UAAMyD,QAAQ,GAAG,EAAjB;EACA,SAAK,IAAI5B,GAAT,IAAgB7B,IAAhB,EAAsB;EACpB,YAAM4D,OAAO,GAAG,KAAKL,GAAL,CAAS,WAAT,EAAsB,KAAtB,EAA6BvD,IAAI,CAAC6B,GAAD,CAAjC,EAAwCA,GAAxC,CAAhB;EACA4B,MAAAA,QAAQ,CAACC,IAAT,CAAcE,OAAd;EACD;EACD,WAAOd,OAAO,CAACZ,GAAR,CAAYuB,QAAZ,CAAP;EACD;EAEDnB,EAAAA,OAAO,CAACL,IAAD,EAAO;EACZ,UAAMwB,QAAQ,GAAG,EAAjB;EACAxB,IAAAA,IAAI,CAACnB,OAAL,CAAce,GAAD,IAAS4B,QAAQ,CAACC,IAAT,CAAc,KAAKH,GAAL,CAAS,WAAT,EAAsB,QAAtB,EAAgC1B,GAAhC,CAAd,CAAtB;EACA,WAAOiB,OAAO,CAACZ,GAAR,CAAYuB,QAAZ,CAAP;EACD;EAEDlB,EAAAA,MAAM,GAAG;EACP,WAAO,KAAKgB,GAAL,CAAS,WAAT,EAAsB,OAAtB,CAAP;EACD;EAEDA,EAAAA,GAAG,CAACM,KAAD,EAAQC,EAAR,EAAYC,MAAZ,EAAoBC,MAApB,EAA4B;EAC7B,UAAMC,EAAE,GAAG,IAAX;EACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,IAAe,KAAKC,WAAL,CAAiBF,EAAE,CAACvC,SAApB,CAA7B;EACA,WAAO,KAAKwC,MAAL,CAAY/B,IAAZ,CAAkBiC,EAAD,IAAQ;EAC9B,aAAO,IAAItB,OAAJ,CAAY,CAACC,OAAD,EAAUsB,MAAV,KAAqB;EACtC,cAAMC,EAAE,GAAGF,EAAE,CAACG,WAAH,CAAeN,EAAE,CAACvC,SAAlB,EAA6BmC,KAA7B,EAAoCW,WAApC,CAAgDP,EAAE,CAACvC,SAAnD,CAAX;EACA,cAAM+C,OAAO,GAAGH,EAAE,CAACR,EAAD,CAAF,CAAO5C,IAAP,CAAYoD,EAAZ,EAAgBP,MAAhB,EAAwBC,MAAxB,CAAhB;EACAS,QAAAA,OAAO,CAACC,SAAR,GAAqBC,KAAD,IAAY5B,OAAO,CAAC4B,KAAK,CAACC,MAAN,CAAaC,MAAd,CAAvC;EACAJ,QAAAA,OAAO,CAACK,OAAR,GAAmBH,KAAD,IAAWN,MAAM,CAACM,KAAK,CAACI,KAAP,CAAnC;EACD,OALM,CAAP;EAMD,KAPM,CAAP;EAQD;EAED,MAAInC,KAAJ,GAAY;EACV,WAAOnC,MAAM,CAACuE,SAAd;EACD;EAEDb,EAAAA,WAAW,CAAC9B,KAAD,EAAQ;EACjB,WAAO,IAAIS,OAAJ,CAAY,CAACC,OAAD,EAAUsB,MAAV,KAAqB;EACtC,YAAMI,OAAO,GAAG,KAAK7B,KAAL,CAAWqC,IAAX,CAAgB5C,KAAhB,EAAuB,CAAvB,CAAhB;EACAoC,MAAAA,OAAO,CAACS,eAAR,GAA2BP,KAAD,IAAW;EACnC,cAAMP,EAAE,GAAGO,KAAK,CAACC,MAAN,CAAaC,MAAxB;EACAT,QAAAA,EAAE,CAACe,iBAAH,CAAqB9C,KAArB;EACD,OAHD;EAIAoC,MAAAA,OAAO,CAACC,SAAR,GAAoB,MAAM3B,OAAO,CAAC0B,OAAO,CAACI,MAAT,CAAjC;EACAJ,MAAAA,OAAO,CAACK,OAAR,GAAkB,MAAMT,MAAM,CAACI,OAAO,CAACM,KAAT,CAA9B;EACD,KARM,CAAP;EASD;EAED,aAAWzE,IAAX,GAAkB;EAChB,WAAO,WAAP;EACD;EAlE6B;EAqEhC,aAAc,GAAGgD,SAAjB;;ECrEA,MAAM8B,MAAN,SAAqB/D,OAArB,CAA6B;EAC3BD,EAAAA,WAAW,CAACE,OAAD,EAAU;EACnB,UAAMA,OAAN;EACA,SAAK6C,WAAL;EACD;EAEDnB,EAAAA,WAAW,GAAG;EACZ,UAAMiB,EAAE,GAAG,IAAX;EACA,WAAO,IAAInB,OAAJ,CAAaC,OAAD,IAAa;EAC9B,WAAKH,KAAL,CAAW2B,WAAX,CAAuB,UAAUD,EAAV,EAAc;EACnCA,QAAAA,EAAE,CAACe,UAAH,yBAA+BpB,EAAE,CAACvC,SAAlC,GAA+C,EAA/C,EAAmD,CAAC4D,GAAD,EAAMC,OAAN,KAAkB;EACnExC,UAAAA,OAAO,CAACkB,EAAE,CAAClE,KAAH,CAASwF,OAAT,CAAD,CAAP;EACD,SAFD;EAGD,OAJD;EAKD,KANM,CAAP;EAOD;EAEDvD,EAAAA,OAAO,CAACC,IAAD,EAAO;EACZ,UAAMgC,EAAE,GAAG,IAAX;EACA,UAAMuB,CAAC,GAAGvD,IAAI,CAACwD,GAAL,CAAS,MAAM,GAAf,EAAoBC,IAApB,CAAyB,IAAzB,CAAV,CAFY;EAIZ,WAAO,KAAKC,OAAL,kCAAuC1B,EAAE,CAACvC,SAA1C,4BAAqE8D,CAArE,QAA2EvD,IAA3E,CAAP;EACD;EAEDG,EAAAA,OAAO,CAACpC,IAAD,EAAO;EACZ,UAAMqC,KAAK,GAAG,KAAKX,SAAnB;EACA,SAAKkB,KAAL,CAAW2B,WAAX,CAAwBD,EAAD,IAAQ;EAC7B,WAAK,IAAIzC,GAAT,IAAgB7B,IAAhB,EAAsB;EACpBsE,QAAAA,EAAE,CAACe,UAAH,kCAAwChD,KAAxC,iCAA2E,CAACR,GAAD,EAAM,KAAKT,WAAL,CAAiBH,SAAjB,CAA2BjB,IAAI,CAAC6B,GAAD,CAA/B,CAAN,CAA3E;EACD;EACF,KAJD;EAKD;EAEDS,EAAAA,OAAO,CAACL,IAAD,EAAO;EACZ,UAAMI,KAAK,GAAG,KAAKX,SAAnB;EACA,UAAM8D,CAAC,GAAGvD,IAAI,CAACwD,GAAL,CAAS,MAAM,GAAf,EAAoBC,IAApB,CAAyB,IAAzB,CAAV;EACA,WAAO,KAAKC,OAAL,uBAA4BtD,KAA5B,4BAAmDmD,CAAnD,QAAyDvD,IAAzD,CAAP;EACD;EAEDM,EAAAA,MAAM,GAAG;EACP,UAAMF,KAAK,GAAG,KAAKX,SAAnB;EACA,WAAO,KAAKiE,OAAL,uBAA4BtD,KAA5B,EAAP;EACD;EAED,MAAIO,KAAJ,GAAY;EACV,WAAOnC,MAAM,CAACmF,YAAP,CAAoB,IAApB,EAA0B,CAA1B,EAA6B,KAAKrE,QAAL,CAAcI,WAA3C,EAAwD,KAAKJ,QAAL,CAAcsE,IAAtE,CAAP;EACD;EAED1B,EAAAA,WAAW,GAAG;EACZ,UAAM9B,KAAK,GAAG,KAAKX,SAAnB;EACA,QAAI,CAACjB,MAAD,IAAW,OAAOA,MAAM,CAACmF,YAAd,KAA+B,UAA9C,EAA0D;EAC1D,WAAO,KAAKD,OAAL,sCAA2CtD,KAA3C,0BAAP;EACD;EAEDsD,EAAAA,OAAO,CAACG,KAAD,EAAQC,IAAI,GAAG,EAAf,EAAmB;EACxB,UAAM9B,EAAE,GAAG,IAAX;EACA,WAAO,IAAInB,OAAJ,CAAaC,OAAD,IAAa;EAC9BkB,MAAAA,EAAE,CAACrB,KAAH,CAAS2B,WAAT,CAAqB,UAAUD,EAAV,EAAc;EACjCA,QAAAA,EAAE,CAACe,UAAH,CAAcS,KAAd,EAAqBC,IAArB,EAA2B,CAACT,GAAD,EAAMC,OAAN,KAAkB;EAC3CxC,UAAAA,OAAO,CAACkB,EAAE,CAAClE,KAAH,CAASwF,OAAT,CAAD,CAAP;EACD,SAFD;EAGD,OAJD;EAKD,KANM,CAAP;EAOD;EAEDxF,EAAAA,KAAK,CAACwF,OAAD,EAAU;EACb,UAAMtF,GAAG,GAAG,EAAZ;EACA,UAAM+F,GAAG,GAAGT,OAAO,CAACU,IAAR,CAAaC,MAAzB;EACA,SAAK,IAAI9F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4F,GAApB,EAAyB5F,CAAC,EAA1B,EAA8B;EAC5BH,MAAAA,GAAG,CAACsF,OAAO,CAACU,IAAR,CAAaE,IAAb,CAAkB/F,CAAlB,EAAqByB,GAAtB,CAAH,GAAgC,KAAKT,WAAL,CAAiBrB,KAAjB,CAAuBwF,OAAO,CAACU,IAAR,CAAaE,IAAb,CAAkB/F,CAAlB,EAAqB0B,KAA5C,CAAhC;EACD;EACD,WAAO7B,GAAP;EACD;EAED,aAAWK,IAAX,GAAkB;EAChB,WAAO,QAAP;EACD;EA5E0B;EA+E7B,UAAc,GAAG8E,MAAjB;;EC/EA,MAAMgB,YAAN,SAA2B/E,OAA3B,CAAmC;EACjCD,EAAAA,WAAW,CAACE,OAAD,EAAU;EACnB,UAAMA,OAAN;EACD;EAED0B,EAAAA,WAAW,GAAG;EACZ,WAAO,KAAKX,KAAZ;EACD;EAEDL,EAAAA,OAAO,CAACC,IAAD,EAAO;EACZ,UAAMI,KAAK,GAAG,EAAd;EACAJ,IAAAA,IAAI,CAACnB,OAAL,CAAaE,CAAC,IAAI;EAChB,YAAMD,CAAC,GAAG,KAAKK,WAAL,CAAiBrB,KAAjB,CAAuB,KAAK6C,KAAL,CAAWyD,OAAX,CAAmB,KAAK3E,SAAL,GAAiB,GAAjB,GAAuBV,CAA1C,CAAvB,CAAV;EACA,UAAID,CAAC,KAAK,IAAV,EAAgBsB,KAAK,CAACrB,CAAD,CAAL,GAAWD,CAAX;EACjB,KAHD;EAIA,WAAOsB,KAAP;EACD;EAEDD,EAAAA,OAAO,CAACpC,IAAD,EAAO;EACZ,SAAK,IAAI6B,GAAT,IAAgB7B,IAAhB,EAAsB;EACpB,WAAK4C,KAAL,CAAW0D,OAAX,CAAmB,KAAK5E,SAAL,GAAiB,GAAjB,GAAuBG,GAA1C,EAA+C,KAAKT,WAAL,CAAiBH,SAAjB,CAA2BjB,IAAI,CAAC6B,GAAD,CAA/B,CAA/C;EACD;EACD,WAAO,IAAP;EACD;EAEDS,EAAAA,OAAO,CAACL,IAAD,EAAO;EACZ,WAAOA,IAAI,CAACwD,GAAL,CAASzE,CAAC,IAAI,KAAK4B,KAAL,CAAW2D,UAAX,CAAsB,KAAK7E,SAAL,GAAiB,GAAjB,GAAuBV,CAA7C,CAAd,CAAP;EACD;EAEDuB,EAAAA,MAAM,GAAG;EACPjD,IAAAA,MAAM,CAAC2C,IAAP,CAAY,KAAKW,KAAjB,EAAwB9B,OAAxB,CAAgCE,CAAC,IAAI;EACnC,UAAIA,CAAC,CAACX,OAAF,CAAU,KAAKqB,SAAf,MAA8B,CAAlC,EAAqC,KAAKkB,KAAL,CAAW2D,UAAX,CAAsBvF,CAAtB;EACtC,KAFD;EAGA,WAAO,IAAP;EACD;EAED,MAAIqB,KAAJ,GAAY;EACV,WAAO,KAAKL,OAAL,CAAa1C,MAAM,CAAC2C,IAAP,CAAY,KAAKW,KAAjB,EAAwB6C,GAAxB,CAA4BzE,CAAC,IAAI;EACnD,UAAIA,CAAC,CAACX,OAAF,CAAU,KAAKqB,SAAf,MAA8B,CAAlC,EAAqC,OAAOV,CAAC,CAACnB,KAAF,CAAQ,KAAK6B,SAAL,CAAewE,MAAf,GAAwB,CAAhC,CAAP;EACtC,KAFmB,EAEjBM,MAFiB,CAEVxF,CAAC,IAAI,OAAOA,CAAP,KAAa,WAFR,CAAb,CAAP;EAGD;EAED,MAAI4B,KAAJ,GAAY;EACV,WAAOnC,MAAM,CAACgG,YAAd;EACD;EAED,aAAWnG,IAAX,GAAkB;EAChB,WAAO,cAAP;EACD;EAhDgC;EAmDnC,gBAAc,GAAG8F,YAAjB;;ECnDA,MAAMM,OAAN,SAAsBrF,OAAtB,CAA8B;EAC5BD,EAAAA,WAAW,CAACE,OAAD,EAAU;EACnB,UAAMA,OAAN;EACD;EAED0B,EAAAA,WAAW,GAAG;EACZ,WAAO,KAAKX,KAAZ;EACD;EAED,MAAIA,KAAJ,GAAY;EACV,QAAIwC,MAAM,GAAG,KAAKjC,KAAlB;EAAA,QAAyB3C,GAAG,GAAG,EAA/B;EACA4E,IAAAA,MAAM,CAACrE,KAAP,CAAa,IAAb,EAAmBM,OAAnB,CAA4BgB,KAAD,IAAW;EACpC,UAAI,CAACd,CAAD,EAAID,CAAJ,IAASe,KAAK,CAACtB,KAAN,CAAY,GAAZ,CAAb;EACAP,MAAAA,GAAG,CAACe,CAAD,CAAH,GAAS,KAAKI,WAAL,CAAiBrB,KAAjB,CAAuBgB,CAAvB,CAAT;EACD,KAHD;EAIA,WAAOd,GAAG,CAAC,KAAKyB,SAAN,CAAH,IAAuB,EAA9B;EACD;EAED,MAAIW,KAAJ,CAAUP,KAAV,EAAiB;EACfa,IAAAA,QAAQ,CAACgE,MAAT,aAAqB,KAAKjF,SAA1B,cAAuCL,OAAO,CAACJ,SAAR,CAAkBa,KAAlB,CAAvC;EACD;EAED,MAAIc,KAAJ,GAAY;EACV,WAAOD,QAAQ,CAACgE,MAAhB;EACD;EAED,aAAWrG,IAAX,GAAkB;EAChB,WAAO,SAAP;EACD;EA5B2B;EA+B9B,WAAc,GAAGoG,OAAjB;;EC/BA,MAAME,WAAN,SAA0BvF,OAA1B,CAAkC;EAChCD,EAAAA,WAAW,CAACE,OAAD,EAAUtB,IAAI,GAAG,EAAjB,EAAqB;EAC9B,UAAMsB,OAAN;EACA,SAAKe,KAAL,GAAahB,OAAO,CAACtB,KAAR,CAAcC,IAAd,CAAb;EACD;EAEDgD,EAAAA,WAAW,GAAG;EACZ,WAAO,KAAKX,KAAZ;EACD;EAEDD,EAAAA,OAAO,CAACpC,IAAD,EAAO;EACZ,SAAK,IAAI6B,GAAT,IAAgB7B,IAAhB,EAAsB;EACpB,WAAKqC,KAAL,CAAWR,GAAX,IAAkB7B,IAAI,CAAC6B,GAAD,CAAtB;EACD;EACF;EAED,MAAIe,KAAJ,GAAY;EACV,WAAO,KAAKP,KAAZ;EACD;EAED,aAAW/B,IAAX,GAAkB;EAChB,WAAO,aAAP;EACD;EAtB+B;EAyBlC,eAAc,GAAGsG,WAAjB;;ECrBA,IAAIC,QAAQ,GAAG,EAAf;EACAA,QAAQ,CAACvD,SAAS,CAAChD,IAAX,CAAR,GAA2BgD,SAA3B;EACAuD,QAAQ,CAACzB,MAAM,CAAC9E,IAAR,CAAR,GAAwB8E,MAAxB;EACAyB,QAAQ,CAACT,YAAY,CAAC9F,IAAd,CAAR,GAA8B8F,YAA9B;EACAS,QAAQ,CAACH,OAAO,CAACpG,IAAT,CAAR,GAAyBoG,OAAzB;EACAG,QAAQ,CAACD,WAAW,CAACtG,IAAb,CAAR,GAA6BsG,WAA7B;EAEA,cAAc,GAAGC,QAAjB;;ECVA,MAAMC,YAAN,CAAmB;EACjB1F,EAAAA,WAAW,CAACE,OAAD,EAAU;EACnB,QAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiCA,OAAO,GAAG;EAAEyF,MAAAA,QAAQ,EAAE,CAACzF,OAAD;EAAZ,KAAV,CAAjC,KAAyEA,OAAO,GAAGA,OAAO,IAAI,EAArB;EACzE,SAAKC,QAAL,GAAgBjC,MAAM,CAAC0H,MAAP,CAAc,KAAK5F,WAAL,CAAiB6F,cAA/B,EAA+C3F,OAA/C,CAAhB;EACA,WAAO,KAAK4F,OAAZ;EACD;EAED,MAAIA,OAAJ,GAAc;EACZ,QAAIA,OAAO,GAAG,KAAKC,cAAL,EAAd;EACA,QAAI,OAAOD,OAAP,KAAmB,WAAvB,EAAoC,MAAMnF,KAAK,CAAC,gDAAD,CAAX;EACpC,QAAIqF,gBAAgB,GAAG,KAAKhG,WAAL,CAAiBiG,iBAAjB,CAAmC,KAAK9F,QAAxC,EAAkD2F,OAAO,CAAC5G,IAA1D,CAAvB;EACA,QAAI8G,gBAAJ,EAAsB;EAAE,aAAOA,gBAAP;EAA0B,KAAlD,MACK;EACH,UAAIE,eAAe,GAAG,IAAIJ,OAAJ,CAAY,KAAK3F,QAAjB,CAAtB;EACA,WAAKH,WAAL,CAAiBmG,IAAjB,CAAsBD,eAAtB;EACA,aAAOA,eAAP;EACD;EACF;EAED,MAAIP,QAAJ,GAAe;EACb,WAAO,KAAKxF,QAAL,CAAcwF,QAAd,CAAuBS,MAAvB,CAA8B,CAAC,WAAD,EAAc,QAAd,EAAwB,cAAxB,EAAwC,SAAxC,EAAmD,aAAnD,CAA9B,CAAP;EACD;EAEDL,EAAAA,cAAc,GAAG;EACf,SAAK,IAAI/G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK2G,QAAL,CAAcb,MAAlC,EAA0C9F,CAAC,EAA3C,EAA+C;EAC7C,UAAIwC,KAAK,GAAG,KAAKxB,WAAL,CAAiBqG,eAAjB,CAAiC,KAAKV,QAAL,CAAc3G,CAAd,CAAjC,CAAZ;EACA,UAAIwC,KAAK,IAAI,IAAIA,KAAJ,CAAU,KAAKrB,QAAf,EAAyBkB,WAAzB,EAAb,EAAqD,OAAOG,KAAP;EACtD;EACF;EAED,SAAOyE,iBAAP,CAAyB/F,OAAzB,EAAkChB,IAAlC,EAAwC;EACtC,QAAIoH,YAAY,GAAG,KAAKxF,GAAxB;EAAA,QAA6B9B,CAA7B;EACA,QAAI8F,MAAM,GAAGwB,YAAY,CAACxB,MAA1B;EACA,SAAK9F,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8F,MAAhB,EAAwB9F,CAAC,EAAzB,EAA6B;EAC3B,UAAIsH,YAAY,CAACtH,CAAD,CAAZ,CAAgBoC,QAAhB,CAAyBlB,OAAzB,EAAkChB,IAAlC,CAAJ,EAA6C,OAAOoH,YAAY,CAACtH,CAAD,CAAnB;EAC9C;EACD,WAAO,KAAP;EACD;EAED,SAAOmH,IAAP,CAAYI,QAAZ,EAAsB;EACpB,SAAKzF,GAAL,CAASwB,IAAT,CAAciE,QAAd;EACD;EAED,aAAWV,cAAX,GAA4B;EAC1B,WAAO;EACLF,MAAAA,QAAQ,EAAE,EADL;EAELvF,MAAAA,IAAI,EAAE,cAFD;EAGLC,MAAAA,OAAO,EAAE,CAHJ;EAILE,MAAAA,WAAW,EAAE,eAJR;EAKLkE,MAAAA,IAAI,EAAE,IAAI,IAAJ,GAAW;EALZ,KAAP;EAOD;EAED,SAAO+B,IAAP,CAAY5H,IAAZ,EAAkB;EAChB,WAAO,IAAI4G,WAAJ,CAAgB,EAAhB,EAAoB5G,IAApB,CAAP;EACD;EAvDgB;EA0DnB8G,YAAY,CAACW,eAAb,GAA+BZ,UAA/B;EACAC,YAAY,CAAC5E,GAAb,GAAmB,EAAnB;EAEA,iBAAc,GAAG4E,YAAjB;;;;;;;;;;;"}