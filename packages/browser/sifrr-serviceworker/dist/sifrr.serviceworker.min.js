/*! Sifrr.Serviceworker v0.0.1-alpha - sifrr project - 2018/12/26 0:56:36 UTC */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e.Sifrr=e.Sifrr||{},e.Sifrr.Serviceworker=t())}(this,function(){"use strict";const e="1",t={default:{type:"NETWORK_FIRST",cache:"other"}},n="fallbacks",r={default:"./404.html"},c=[];function o(e,t){for(let[n,r]of Object.entries(t)){const t=new RegExp(n);if(e.match(t))return r}return t.default}function s(e){return new Request(e,{method:"GET"})}function a(t,n){return u(t.clone(),n),caches.open(n+"-v"+e).then(e=>e.match(t)).then(e=>{if(e)return e;throw"Cache not found for "+t.url})}function u(t,n){return caches.open(n+"-v"+e).then(e=>fetch(t).then(n=>e.put(t,n.clone()).then(()=>n)))}return self.addEventListener("install",e=>{self.skipWaiting(),e.waitUntil(function(e,r){let c=[];e.forEach(e=>{let n=s(e);return c.push(u(n,o(e,t).cache))});for(let[,e]of Object.entries(r)){let t=s(e);c.push(u(t,n))}return Promise.all(c)}(c,r))}),self.addEventListener("activate",()=>{let r=[n+"-v"+e];for(let[,n]of Object.entries(t))r.push(n.cache+"-v"+e);caches.keys().then(e=>e.filter(e=>!r.includes(e))).then(e=>Promise.all(e.map(e=>caches.delete(e)))).then(()=>self.clients.claim())}),void self.addEventListener("fetch",e=>{let c=e.request,s=c.clone(),f=c.clone();"GET"===c.method&&e.respondWith(function(e){let n=e.clone();const{type:r,cache:c}=o(e.url,t)||{type:"default",cache:"extra"};let s;switch(r){case"NETWORK_ONLY":s=u(n,c);break;case"CACHE_ONLY":s=a(n,c);break;case"CACHE_FIRST":s=a(n,c).catch(()=>u(e,c));break;case"NETWORK_FIRST":default:s=u(n,c).catch(()=>a(e,c))}return s}(c).then(e=>{if(!e.ok&&e.status>0&&o(f.url,r))throw Error("response status "+e.status);return e}).catch(()=>(function(e){const t=o(e.url,r);return a(new Request(t),n)})(s)))})});
/*! (c) @aadityataparia */
//# sourceMappingURL=sifrr.serviceworker.min.js.map
