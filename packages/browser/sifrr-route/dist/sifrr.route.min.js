/*! Sifrr.Route v0.0.4 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@sifrr/dom")):"function"==typeof define&&define.amd?define(["@sifrr/dom"],e):((t=t||self).Sifrr=t.Sifrr||{},t.Sifrr.Route=e(t.Sifrr.Dom))}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;const e={RegexPath:class{constructor(t,e={}){this.options=Object.assign({delimiter:"/"},e),this.path=t}get regex(){return this._regex=this._regex||new RegExp("^"+this.path.replace(/\/:[A-Za-z0-9_]{0,}\?/g,"(/[^/]{0,})?").replace(/\*\*/g,"(.{0,})").replace(/\*/g,"([^/]{0,})").replace(/:[A-Za-z0-9_]{0,}/g,"([^/]{0,})")+"$"),this._regex}get dataMap(){return this._dataMap?this._dataMap:(this._dataMap=[],this.path.split("/").forEach(t=>{":"===t[0]?this._dataMap.push(t):("*"===t||"**"===t||t.match(/\(.*\)/))&&this._dataMap.push(t)}),this._dataMap)}test(t){const e={},s=this.regex.exec(t);return s&&this.dataMap.forEach((t,a)=>{"*"===t?(e["*"]=e["*"]||[],e["*"].push(s[a+1])):"**"===t?(e["**"]=e["**"]||[],e["**"].push(s[a+1])):":"===t[0]?e[t.substr(1)]=s[a+1]:(e.regexGroups=e.regexGroups||[],e.regexGroups.push(s[a+1]))}),{match:!!s,data:e}}}},s=window.document.title;class a extends t.Element{static get template(){return t.template("<style>:host{display: none;}:host(.active){display: block;}</style><slot></slot>")}static observedAttrs(){return["path"]}onConnect(){this.loaded=!1,this.constructor.all.push(this)}onDisconnect(){this.constructor.all.splice(this.constructor.all.indexOf(this),1)}onAttributeChange(t){"path"===t&&(this._routeRegex=new e.RegexPath(this.getAttribute("path")),this.refresh())}get routeRegex(){return this._routeRegex}refresh(){const t=window.location.pathname,e=this.routeRegex.test(t);e.match?(this.activate(),this.state=e.data,this.$$("[data-sifrr-route-state=true]",!1).forEach(t=>{t.state={route:e.data}})):this.deactivate()}activate(){if(!this.loaded&&(this.loaded=!0,this.dataset.sifrrElements&&this.dataset.sifrrElements.indexOf("-")>0)){this.dataset.sifrrElements.split(",").filter((t,e,s)=>s.indexOf(t)===e).forEach(e=>{t.load(e)})}this.classList.add("active"),t.Event.trigger(this,"activate"),this.onActivation()}onActivation(){}deactivate(){this.classList.remove("active"),t.Event.trigger(this,"deactivate"),this.onDeactivation()}onDeactivation(){}static get currentUrl(){return this._curl}static set currentUrl(t){this._curl=t}static refreshAll(){window.location.pathname!==this.currentUrl&&(this.all.forEach(t=>{t.refresh()}),this.onRouteChange(),this.currentUrl=window.location.pathname)}static onRouteChange(){}static clickEventListener(t){if(!window.history||!window.history.pushState)return!1;const e=t.composedPath?t.composedPath()[0]:t.target;if(t.metaKey||t.ctrlKey||!e.matches("a")||e.host!==window.location.host||e.target&&"_self"!==e.target)return!1;t.preventDefault();const i=e.getAttribute("title")||s,r={pathname:e.pathname,href:e.href,title:i};return window.document.title=i,window.history.pushState(r,i,e.href),a.refreshAll(),!0}static popstateEventListener(t){t.state&&t.state.title?window.document.title=t.state.title:window.document.title=s,a.refreshAll()}}return a.all=[],t.Event.add("activate"),t.Event.add("deactivate"),e.Element=a,t.register(a),window.addEventListener("popstate",a.popstateEventListener),window.document.addEventListener("click",a.clickEventListener),e});
/*! (c) @aadityataparia */
