this.Sifrr=this.Sifrr||{},this.Sifrr.DOM=function(){"use strict";var t=class{static absolute(t,e){let n=t.split("/"),s=e.split("/");n.pop();for(let t=0;t<s.length;t++)"."!=s[t]&&(".."==s[t]?n.pop():n.push(s[t]));return n.join("/")}static getRoutes(t){"/"!=t[0]&&(t="/"+t);let e=t.indexOf("?");return-1!=e&&(t=t.substring(0,e)),t.split("/")}};var e=class{constructor(t){this.name=t.name,this.html=t.html,this.base=t,this._isElementOk()&&this._create()}_isElementOk(){if(this.name)if(window.customElements.get(this.name))console.log(`Error creating Element: ${this.name} - Element with this name is already defined.`);else{if(!(this.name.indexOf("-")<1))return!0;console.log(`Error creating Element: ${this.name} - Element name must have one dash '-'`)}else console.log("Error creating Element: No name given.");return!1}_create(){let e=document.createElement("link");const n=function(e,n){return class extends HTMLElement{static get observedAttributes(){return["sifrr-state"].concat(n.observedAttributes||[])}constructor(){super();const s=e.import.querySelector("template");if("true"==s.getAttribute("relative-url")){let n=e.href,a=/href=['"]?((?!http)[a-zA-z.\/\-\_]+)['"]?/g,o=/src=['"]?((?!http)[a-zA-z.\/\-\_]+)['"]?/g,r=s.innerHTML.replace(a,i);function i(e,s){return e.replace(s,t.absolute(n,s))}r=r.replace(o,i),s.innerHTML=r}"false"===s.getAttribute("shadow-root")?n.sr=!1:(this.attachShadow({mode:"open"}).appendChild(s.content.cloneNode(!0)),n.sr=!0),"false"===s.getAttribute("state")&&Object.defineProperty(this,"state",{set:function(t){console.log("State is not enabled for ",this)},get:function(){console.log("State is not enabled for ",this)}}),n.vdom=SFComponent.toVDOM(s.content.cloneNode(!0)),"function"==typeof n.createdCallback&&n.createdCallback(this)}attributeChangedCallback(t,e,s){"data-bind"===t&&(this.state={bind:tryParseJSON(s)}),"function"==typeof n.attributeChangedCallback&&n.attributeChangedCallback(this,t,e,s)}connectedCallback(){let t=n.defaultState||{},e=tryParseJSON(this.dataset.bind)||{},s=this.state;this.state=Object.assign(t,{bind:e},s),this.shadowRoot?this.shadowRoot.addEventListener("change",SFComponent.twoWayBind):this.addEventListener("change",SFComponent.twoWayBind),"function"==typeof n.connectedCallback&&n.connectedCallback(this)}disconnectedCallback(){"function"==typeof n.disconnectedCallback&&n.disconnectedCallback(this)}clone(t=!0){let e=this.cloneNode(t);return e.state=this.state,e}get state(){return this._state}set state(t){this._state=this._state||{};let e=Object.assign({},this._state);Object.assign(this._state,t),SFComponent.updateState(this,e)}get sifrr(){return!0}clearState(){this._state={},SFComponent.updateState(this)}}}(e,this.base);e.rel="import",e.href=this.html,e.setAttribute("async",""),e.onload=function(t){try{window.customElements.define(this.name,n)}catch(t){console.log(`Error creating Element: ${this.name} - ${t}`)}},e.onerror=function(t){console.log(t)},window.document.head.appendChild(e)}};class n{constructor(t,e=null){this.name=t;let n=t.split("-").join("/");return this.html="string"==typeof e?e:"/elements/"+n+".html",Array.isArray(t)?t.map(t=>new this.constructor(t)):"object"==typeof t?Object.keys(t).map(e=>new this.constructor(e,t[e])):(this._registerElement(),void this.constructor.add(t,this))}_registerElement(){this.customElement=new e(this)}static add(t,e){this.elements[t]=e}}return n.elements={},n}();
