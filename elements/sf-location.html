<template>
  <style>

  </style>
  <p class="${this.location1()}">id - ${this.location.id}</p>
  <p>name - ${this.location.name}</p>
  <p>address - ${this.location.address}</p>
  <p>attractions - ${this.attractions[0].name}</p>
</template>
<script>
  let sfLocation = SFComponent['sf-location'];
  sfLocation.observedAttributes = ['data-location-id'];
  sfLocation.defaultState = {
    location: {
      id: 'loading',
      name: 'loading',
      address: 'loading'
    },
    attractions: [{
      name: 'loading'
    }],
    location1: function() {
      return this.location.id == 1 ? 'bang' : 'boom';
    }
  }
  sfLocation.attributeChangedCallback = function(e, attrName, oldVal, newVal) {
    if (attrName == 'data-location-id') {
      SFAPI.get('https://tuneout.aadityataparia.com/api/location/' + newVal).then(function(result) {
        if (result && result.results) {
          let data = {
            location: result.results.location[0],
            attractions: result.results.attractions
          }
          e.state = data;
        }
      });
    }
  }
</script>